---
output-file: anomaly_exogenous.html
title: Add exogenous variables
---


[![](https://colab.research.google.com/assets/colab-badge.svg)](https://colab.research.google.com/github/Nixtla/nixtla/blob/main/nbs/docs/capabilities/anomaly-detection/02_anomaly_exogenous.ipynb)

```python
import pandas as pd
from nixtla import NixtlaClient
```


```python
nixtla_client = NixtlaClient(
    # defaults to os.environ.get("NIXTLA_API_KEY")
    api_key = 'my_api_key_provided_by_nixtla'
)
```


```python
# Read the dataset
# The dataset has exogenous features in its columns
df = pd.read_csv('https://raw.githubusercontent.com/Nixtla/transfer-learning-time-series/main/datasets/electricity-short-with-ex-vars.csv')

# Detect anomalies
anomalies_df = nixtla_client.detect_anomalies(
    df=df,
    time_col='ds',
    target_col='y'
)

# Plot weight of exgeonous features
nixtla_client.weights_x.plot.barh(x='features', y='weights')
```

``` text
INFO:nixtla.nixtla_client:Validating inputs...
INFO:nixtla.nixtla_client:Preprocessing dataframes...
INFO:nixtla.nixtla_client:Inferred freq: H
INFO:nixtla.nixtla_client:Calling Anomaly Detector Endpoint...
INFO:nixtla.nixtla_client:Using the following exogenous variables: Exogenous1, Exogenous2, day_0, day_1, day_2, day_3, day_4, day_5, day_6
```

![](/nixtla/docs/capabilities/anomaly-detection/02_anomaly_exogenous_files/figure-markdown_strict/cell-5-output-2.png)

Read our detailed guide on [anomaly
detection](https://docs.nixtla.io/docs/tutorials/anomaly_detection) for
more information.

