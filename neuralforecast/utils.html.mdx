---
description: >-
  The `core.NeuralForecast` class allows you to efficiently fit multiple
  `NeuralForecast` models for large sets of time series. It operates with pandas
  DataFrame `df` that identifies individual series and datestamps with the
  `unique_id` and `ds` columns, and the `y` column denotes the target time
  series variable. To assist development, we declare useful datasets that we use
  throughout all `NeuralForecast`'s unit tests.<br/><br/>
output-file: utils.html
title: Example Data
---


# 1. Synthetic Panel Data

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L17"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### generate_series

> ``` text
>  generate_series (n_series:int, freq:str='D', min_length:int=50,
>                   max_length:int=500, n_temporal_features:int=0,
>                   n_static_features:int=0, equal_ends:bool=False,
>                   seed:int=0)
> ```

Generate Synthetic Panel Series.

Generates `n_series` of frequency `freq` of different lengths in the
interval \[`min_length`, `max_length`\]. If `n_temporal_features > 0`,
then each serie gets temporal features with random values. If
`n_static_features > 0`, then a static dataframe is returned along the
temporal dataframe. If `equal_ends == True` then all series end at the
same date.

**Parameters:**<br/> `n_series`: int, number of series for synthetic
panel.<br/> `min_length`: int, minimal length of synthetic panel’s
series.<br/> `max_length`: int, minimal length of synthetic panel’s
series.<br/> `n_temporal_features`: int, default=0, number of temporal
exogenous variables for synthetic panel’s series.<br/>
`n_static_features`: int, default=0, number of static exogenous
variables for synthetic panel’s series.<br/> `equal_ends`: bool, if True,
series finish in the same date stamp `ds`.<br/> `freq`: str, frequency of
the data, [panda’s available
frequencies](https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#offset-aliases).<br/>

**Returns:**<br/> `freq`: pandas.DataFrame, synthetic panel with columns
\[`unique_id`, `ds`, `y`\] and exogenous.

```python
from neuralforecast.utils import generate_series

synthetic_panel = generate_series(n_series=2)
synthetic_panel.groupby('unique_id').head(4)
```

|     | unique_id | ds         | y        |
|-----|-----------|------------|----------|
| 0   | 0         | 2000-01-01 | 0.357595 |
| 1   | 0         | 2000-01-02 | 1.301382 |
| 2   | 0         | 2000-01-03 | 2.272442 |
| 3   | 0         | 2000-01-04 | 3.211827 |
| 222 | 1         | 2000-01-01 | 5.399023 |
| 223 | 1         | 2000-01-02 | 6.092818 |
| 224 | 1         | 2000-01-03 | 0.476396 |
| 225 | 1         | 2000-01-04 | 1.343744 |

```python
temporal_df, static_df = generate_series(n_series=1000, n_static_features=2,
                                         n_temporal_features=4, equal_ends=False)
static_df.head(2)
```

# 2. AirPassengers Data

The classic Box & Jenkins airline data. Monthly totals of international
airline passengers, 1949 to 1960.

It has been used as a reference on several forecasting libraries, since
it is a series that shows clear trends and seasonalities it offers a
nice opportunity to quickly showcase a model’s predictions performance.

```python
from neuralforecast.utils import AirPassengersDF

AirPassengersDF.head(12)
```

|     | unique_id | ds         | y     |
|-----|-----------|------------|-------|
| 0   | 1.0       | 1949-01-31 | 112.0 |
| 1   | 1.0       | 1949-02-28 | 118.0 |
| 2   | 1.0       | 1949-03-31 | 132.0 |
| 3   | 1.0       | 1949-04-30 | 129.0 |
| 4   | 1.0       | 1949-05-31 | 121.0 |
| 5   | 1.0       | 1949-06-30 | 135.0 |
| 6   | 1.0       | 1949-07-31 | 148.0 |
| 7   | 1.0       | 1949-08-31 | 148.0 |
| 8   | 1.0       | 1949-09-30 | 136.0 |
| 9   | 1.0       | 1949-10-31 | 119.0 |
| 10  | 1.0       | 1949-11-30 | 104.0 |
| 11  | 1.0       | 1949-12-31 | 118.0 |

```python
#We are going to plot the ARIMA predictions, and the prediction intervals.
fig, ax = plt.subplots(1, 1, figsize = (20, 7))
plot_df = AirPassengersDF.set_index('ds')

plot_df[['y']].plot(ax=ax, linewidth=2)
ax.set_title('AirPassengers Forecast', fontsize=22)
ax.set_ylabel('Monthly Passengers', fontsize=20)
ax.set_xlabel('Timestamp [t]', fontsize=20)
ax.legend(prop={'size': 15})
ax.grid()
```


```python
import numpy as np
import pandas as pd

n_static_features = 3
n_series = 5

static_features = np.random.uniform(low=0.0, high=1.0, 
                        size=(n_series, n_static_features))
static_df = pd.DataFrame.from_records(static_features, 
                   columns = [f'static_{i}'for i in  range(n_static_features)])
static_df['unique_id'] = np.arange(n_series)
```


```python
static_df
```

# 3. Panel AirPassengers Data

Extension to classic Box & Jenkins airline data. Monthly totals of
international airline passengers, 1949 to 1960.

It includes two series with static, temporal and future exogenous
variables, that can help to explore the performance of models like
[`NBEATSx`](https://Nixtla.github.io/neuralforecast/models.nbeatsx.html#nbeatsx)
and
[`TFT`](https://Nixtla.github.io/neuralforecast/models.tft.html#tft).

```python
fig, ax = plt.subplots(1, 1, figsize = (20, 7))
plot_df = AirPassengersPanel.set_index('ds')

plot_df.groupby('unique_id')['y'].plot(legend=True)
ax.set_title('AirPassengers Panel Data', fontsize=22)
ax.set_ylabel('Monthly Passengers', fontsize=20)
ax.set_xlabel('Timestamp [t]', fontsize=20)
ax.legend(title='unique_id', prop={'size': 15})
ax.grid()
```


```python
fig, ax = plt.subplots(1, 1, figsize = (20, 7))
plot_df = AirPassengersPanel[AirPassengersPanel.unique_id=='Airline1'].set_index('ds')

plot_df[['y', 'trend', 'y_[lag12]']].plot(ax=ax, linewidth=2)
ax.set_title('Box-Cox AirPassengers Data', fontsize=22)
ax.set_ylabel('Monthly Passengers', fontsize=20)
ax.set_xlabel('Timestamp [t]', fontsize=20)
ax.legend(prop={'size': 15})
ax.grid()
```

# 4. Time Features

We have developed a utility that generates normalized calendar features
for use as absolute positional embeddings in Transformer-based models.
These embeddings capture seasonal patterns in time series data and can
be easily incorporated into the model architecture. Additionally, the
features can be used as exogenous variables in other models to inform
them of calendar patterns in the data.

**References**<br/> - [Haoyi Zhou, Shanghang Zhang, Jieqi Peng, Shuai
Zhang, Jianxin Li, Hui Xiong, Wancai Zhang. “Informer: Beyond Efficient
Transformer for Long Sequence Time-Series
Forecasting”](https://arxiv.org/abs/2012.07436)<br/>

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L402"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### augment_calendar_df

> ``` text
>  augment_calendar_df (df, freq='H')
> ```

> -   Q - \[month\]
> -   M - \[month\]
> -   W - \[Day of month, week of year\]
> -   D - \[Day of week, day of month, day of year\]
> -   B - \[Day of week, day of month, day of year\]
> -   H - \[Hour of day, day of week, day of month, day of year\]
> -   T - \[Minute of hour\*, hour of day, day of week, day of month,
>     day of year\]
> -   S - \[Second of minute, minute of hour, hour of day, day of week,
>     day of month, day of year\] \*minute returns a number from 0-3
>     corresponding to the 15 minute period it falls into.

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L364"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### time_features_from_frequency_str

> ``` text
>  time_features_from_frequency_str (freq_str:str)
> ```

Returns a list of time features that will be appropriate for the given
frequency string. Parameters ———- freq_str Frequency string of the form
\[multiple\]\[granularity\] such as “12H”, “5min”, “1D” etc.

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L357"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### WeekOfYear

> ``` text
>  WeekOfYear ()
> ```

Week of year encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L350"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### MonthOfYear

> ``` text
>  MonthOfYear ()
> ```

Month of year encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L343"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### DayOfYear

> ``` text
>  DayOfYear ()
> ```

Day of year encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L336"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### DayOfMonth

> ``` text
>  DayOfMonth ()
> ```

Day of month encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L329"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### DayOfWeek

> ``` text
>  DayOfWeek ()
> ```

Hour of day encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L322"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### HourOfDay

> ``` text
>  HourOfDay ()
> ```

Hour of day encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L315"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### MinuteOfHour

> ``` text
>  MinuteOfHour ()
> ```

Minute of hour encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L308"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### SecondOfMinute

> ``` text
>  SecondOfMinute ()
> ```

Minute of hour encoded as value between \[-0.5, 0.5\]

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L297"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### TimeFeature

> ``` text
>  TimeFeature ()
> ```

Initialize self. See help(type(self)) for accurate signature.

```python
AirPassengerPanelCalendar, calendar_cols = augment_calendar_df(df=AirPassengersPanel, freq='M')
AirPassengerPanelCalendar.head()
```


```python
plot_df = AirPassengerPanelCalendar[AirPassengerPanelCalendar.unique_id=='Airline1'].set_index('ds')
plt.plot(plot_df['month'])
plt.grid()
plt.xlabel('Datestamp')
plt.ylabel('Normalized Month')
plt.show()
```

------------------------------------------------------------------------

<a
href="https://github.com/Nixtla/neuralforecast/blob/main/neuralforecast/utils.py#L444"
target="_blank" style={{ float: "right", fontSize: "smaller" }}>source</a>

### get_indexer_raise_missing

> ``` text
>  get_indexer_raise_missing (idx:pandas.core.indexes.base.Index,
>                             vals:List[str])
> ```

